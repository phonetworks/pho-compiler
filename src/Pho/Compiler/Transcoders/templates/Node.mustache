<?php

namespace PhoNetworksAutogenerated;

use Pho\Framework;
use Pho\Kernel\Kernel;
use Pho\Kernel\Traits;
use Pho\Kernel\Foundation;


{{pretext}}

/*****************************************************
 * This file was auto-generated by pho-compiler
 * For more information, visit http://phonetworks.org
 ******************************************************/

class {{ class_name }} extends {{ extends }} {

    const T_EDITABLE = {{ editable }};
    const T_PERSISTENT = {{ persistent }};
    const T_EXPIRATION =  {{ expiration }};
    const T_VERSIONABLE = false;
    
    const DEFAULT_MOD = {{ mod }};
    const DEFAULT_MASK = {{ mask }};

    const FIELDS = "{{{ fields }}}";

    const FEED_SIMPLE = "{{{ simple_feed_update }}}";
    const FEED_AGGREGATED = "{{{ aggregated_feed_update }}}";

    {{#actor_constructor}}
    public function __construct(\Pho\Kernel\Kernel $kernel, \Pho\Lib\Graph\GraphInterface $graph {{{ constructor }}})
    {
        {{# incoming_edges_exist }}
        {{#incoming_edges}}
        $this->registerIncomingEdges({{.}}::class);
        {{/incoming_edges}}
        {{/ incoming_edges_exist }}
        {{#with_tails}}
        {{#outgoing_edges}}
        if(class_exists(\PhoNetworksAutogenerated\Edges\{{.}}::class))
            $this->registerOutgoingEdges(\PhoNetworksAutogenerated\Edges\{{.}}::class);
        {{/outgoing_edges}}
        {{/with_tails}}
        parent::__construct($kernel, $graph);
        {{{ constraints }}}
        $this->persist();
        $this->context()->emit("particle.formed", [$this]);
    }
    {{/actor_constructor}}
    {{^actor_constructor}}
    public function __construct(\Pho\Kernel\Kernel $kernel, \Pho\Kernel\Foundation\AbstractActor $actor, \Pho\Lib\Graph\GraphInterface $graph {{{ constructor }}})
    {
        {{# incoming_edges_exist }}
        {{#incoming_edges}}
        $this->registerIncomingEdges({{.}}::class);
        {{/incoming_edges}}
        {{/ incoming_edges_exist }}
        {{#with_tails}}
        {{#outgoing_edges}}
        if(class_exists(PhoNetworksAutogenerated\Edges\{{.}}::class))
            $this->registerOutgoingEdges(PhoNetworksAutogenerated\Edges\{{.}}::class);
        {{/outgoing_edges}}
        {{/with_tails}}
        parent::__construct($kernel, $actor, $graph);
        {{{ constraints }}}
        $this->persist();
        $this->context()->emit("particle.formed", [$this]);
    }
    {{/actor_constructor}}

}

/*****************************************************
 * Timestamp: {{ timestamp }}
 * Size (in bytes): -|-SIZE_IN_BYTES-|-
 * Compilation Time: {{ compilation_time }}
 * -|-HASH-|-
 ******************************************************/